<!DOCTYPE html>
<html lang="en" class="theme-color-07cb79 theme-skin-light">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<META NAME="geo.position" CONTENT="21.028511, 105.804817">
<META NAME="geo.placename" CONTENT="Hanoi, Vietnam">
<META NAME="geo.region" CONTENT="vi">
<meta name="theme-color" content="#536878" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Weather PWA">
<link rel="apple-touch-icon" href="../../../static/img/covers/icon192x192.png">

<meta name="description" content="Java có Pass-by-reference hay không? Điều đó không quan trọng!" />

<!-- <link rel="stylesheet" href="../../../static/style.css"> -->
<title>Pass by Value và Pass by Reference trong Java — luanvv.com</title>
<link rel="manifest" href="../../../static/manifest.json">
<!-- Favicon -->
<link rel="shortcut icon" type="image/ico" href="../../../static/img/favicon.ico" />
<link rel="stylesheet" type="text/css" href="../../../static/fonts/icomoon/style.css">
<!-- Styles -->
<link rel="stylesheet" type="text/css" href="../../../static/js/plugins/jquery.bxslider/jquery.bxslider.css">
<link rel="stylesheet" type="text/css" href="../../../static/js/plugins/jquery.owlcarousel/owl.carousel.css">
<link rel="stylesheet" type="text/css" href="../../../static/js/plugins/jquery.owlcarousel/owl.theme.css">

<link rel="stylesheet" type="text/css" href="../../../static/style.css">
<link rel="stylesheet" type="text/css" href="../../../static/colors/green.css">


<script type="text/javascript" src="../../../static/js/libs/modernizr.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
</head>
<body class="home "> <!-- add loading for progress bar -->
  <div class="mobile-nav">
    <button class="btn-mobile mobile-nav-close" aria-label="Close menu"><i class="rsicon rsicon-close"></i></button>

    <div class="mobile-nav-inner">
      <nav id="mobile-nav" class="nav">
        <ul class="clearfix">
          <li><a href="../../../vi/#about">About</a></li>
          <li><a href="../../../vi/#skills">Skills</a></li>
          <!-- <li><a href="../../../vi/#portfolio">Portfolio</a> </li> -->
          <li><a href="../../../vi/#experience">Experience</a></li>
          <li><a href="../../../vi/#education">Education</a></li>
          <!-- <li><a href="../../../vi/#references">References</a></li> -->
          <li>
            <!-- <a href="../../../vi/blog/">Blog</a> -->
            <a href="../../../vi/blog/">Blog</a>
          </li>
          <!-- <li><a href="../../../vi/#text-section">Future <span></span></a></li> -->
          <!-- <li><a href="../../../vi/#calendar">Calendar <span></span></a></li> -->
          <!-- <li><a href="../../../vi/#contact">Contact <span></span></a></li> -->
        </ul>
      </nav>
    </div>
  </div><!-- .mobile-nav -->
  <div class="wrapper">
    <header class="header">
      
      <div class="head-bar">
        <div class="head-bar-inner">
          <div class="row">
            <div class="col-xs-9 col-sm-6 col-md-3">
              <a class="logo" href="../../../vi/"><span>Luan</span>'s blog</a>
              <!-- <a class="head-logo" href=""><img src="img/rs-logo.png" alt="RScard"/></a> -->
            </div>
            <div class="col-xs-3 col-sm-6 col-md-9">
              <div class="nav-wrap">
                <nav id="nav" class="nav">
                  <ul class="clearfix">
                    <li><a href="../../../vi/#about">About</a></li>
                    <li><a href="../../../vi/#skills">Skills</a></li>
                    <!-- <li><a href="../../../vi/#portfolio">Portfolio</a> </li> -->
                    <li><a href="../../../vi/#experience">Experience</a></li>
                    <li><a href="../../../vi/#education">Education</a></li>
                    <!-- <li><a href="../../../vi/#references">References</a></li> -->
                    <li>
                      <!-- <a href="../../../vi/blog/">Blog</a> -->
                      <a href="../../../vi/blog/">Blog</a>
                    </li>
                    <!-- <li><a href="../../../vi/#text-section">Future <span></span></a></li> -->
                    <!-- <li><a href="../../../vi/#calendar">Calendar <span></span></a></li> -->
                    <!-- <li><a href="../../../vi/#contact">Contact <span></span></a></li> -->
                  </ul>
                </nav>
                <button class="btn-mobile btn-mobile-nav">Menu</button>
                <!-- <button class="btn-sidebar btn-sidebar-open"><i class="rsicon rsicon-menu"></i></button> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </header><!-- .header -->
    <div class="content">
        <div class="container">
      
<div class="row animate-up animated">
  <div class="col-sm-12">
    <main class="post-single">
      <article class="post-content section-box">
          <header class="post-header">
            <div class="post-data">
              <div class="post-title-wrap">
                <h1 class="post-title">Pass by Value và Pass by Reference trong Java</h1>
              </div>
              <div class="post-tag">
                <a href="../../../tags/dev">
                      #dev
                    </a>
                <a href="../../../tags/java">
                      #java
                    </a>
                <a href="../../../tags/pass-by-value">
                      #pass-by-value
                    </a>
                <a href="../../../tags/pass-by-reference">
                      #pass-by-reference
                    </a>
                
              </div>
              <div class="post-info">
                <a href="javascript: void(0)"><i class="rsicon rsicon-user"></i>by luanvv</a>
                <a href="javascript: void(0)"><i class="rsicon"></i>Apr 20 2019</a>
              </div>
            </div>
          </header>
          <div class="post-media">
              <img class="lozad"
                src="../../../static/img/uploads/458x300.png" 
                data-src="../../../static/img/uploads/0_q5Tkq9ctyYd0gd1F.gif" 
                alt="Pass by Value và Pass by Reference trong Java" />
            </div>
        <div class="post-inner">
          <div class="post-editor clearfix">
            <h4> </h4>
<h1>Pass by Value và Pass by Reference trong Java</h1>
<p>Hôm trước có bắt gặp cuộc tranh luận nảy lửa trên một group Skype về Java
Developer. Nội dung tranh luận xoay quanh việc Java có <strong>pass-by-reference</strong> hay
không.</p>
<p>Trước khi trả lời câu hỏi này, chúng ta cần hiểu sự khác biệt giữa
<strong>pass-by-value</strong>(tham trị) và <strong>pass-by-reference</strong>(tham chiếu)</p>
<h4><strong>Pass-by-value</strong></h4>
<p><strong>Pass-by-value</strong> được hiểu là khi bạn pass biến vào làm argument cho một
function, chương trình sẽ không dùng thẳng biến đó mà sao chép giá trị và đưa
cho function, và hệ quả là dù bên trong function xảy ra chuyện gì thì biến thực
tế vẫn được bảo toàn</p>
<p><img src="../../../static/img/uploads/1_gZpx1_-g6SNPmtjET0eHSQ.png" alt=""></p>
<p>Kết quả</p>
<p><img src="../../../static/img/uploads/1_e0gq4JkM8xtF3vtKWm07EQ.png" alt=""></p>
<h4>Pass-by-reference</h4>
<p>Ngược lại với <strong>Pass-by-value</strong>, khi bạn pass biến vào làm argument cho một
function, chương trình sẽ đưa thẳng biến đó cho function tùy ý xử lý, và hệ quả
là nếu bên trong function mà thay đổi giá trị của argument thì biến thực tế bên
ngoài cũng bị thay đổi, vì trong trường hợp này biến bên ngoài và biến(argument)
của function là một.</p>
<p><img src="../../../static/img/uploads/1_xw5E42tHZ_wzhsZ8m_2Owg.png" alt=""></p>
<p>Kết quả</p>
<p><img src="../../../static/img/uploads/1_KMbGr6fotJljgvozD0tEQw.png" alt=""></p>
<p>Có thể xem hình minh họa bên dưới để hiểu rõ hơn</p>
<p><img src="../../../static/img/uploads/0_q5Tkq9ctyYd0gd1F.gif" alt=""></p>
<p>Vậy phần xử lý phía sau(behind the scenes) giữa <strong>Pass-by-value</strong> và
<strong>Pass-by-reference</strong> thì ra sao. Để giải thích cho phần này, tôi tạm dùng cách
C/C++ làm việc để diễn tả.</p>
<p>Dưới đây là mô hình hóa việc lưu trữ dữ liệu của các biến trên bộ nhớ. Ở đây ta
có biến <strong>myAge </strong> có giá trị <strong>14 </strong> được lưu ở bộ nhớ có địa chỉ <strong>106</strong></p>
<p><img src="../../../static/img/uploads/0_qCyny98PQOQRdKiw.jpg" alt=""></p>
<p>Khi <strong>Pass-by-value</strong>, chương trình không pass thẳng biến myAge ở ô 106, mà nó
sẽ sao chép giá trị(<strong>14</strong>) của ô <strong>106</strong> sang ô <strong>152, </strong>và function<strong>
calculateBirthYear </strong>sẽ chỉnh sửa ô nhớ<strong> 152</strong>, và ô <strong>106 </strong>sẽ luôn được an
toàn khỏi bàn tay của function <strong>calculateBirthYear.</strong></p>
<p><img src="../../../static/img/uploads/1_CzGFzVyvkG7aqtHG_EOjOg.png" alt=""></p>
<p><img src="../../../static/img/uploads/1_yjz-HH8BeMBdqMCwHOP2XA.png" alt=""></p>
<p>Nhưng khi <strong>Pass-by-reference</strong>, chương trình sẽ truyền thẳng địa chỉ ô nhớ vào
function, bạn sẽ phải có kiến thức về Pointer trong C/C++ để hiểu cú pháp</p>
<p><img src="../../../static/img/uploads/1_3qB64nCUhml-zw53Smntgw.png" alt=""></p>
<p>Kiến thức về <strong>Pass-by-value</strong> và <strong>Pass-by-reference</strong> là kiến thức chung,
không riêng ngôn ngữ nào, nhưng ở đây tôi chọn C/C++ vì các thuật ngữ của nó dễ
hiểu nhất, không gây nhầm lẫn cho người đọc. Với các ngôn ngữ bậc cao như
Python, Java, C#,… thì khái niệm Pointer không còn, nhưng <strong>Pass-y-reference</strong>
vẫn được một số ngôn ngữ thể hiện ở mức đơn giản và đỡ hack não hơn Pointer.</p>
<p>Dưới đây là ví dụ trong C# với từ khóa <strong>ref </strong>để<strong> Pass-by-reference</strong></p>
<p><img src="../../../static/img/uploads/1_-BOPimXU_UopYjl50-vRow.png" alt=""></p>
<h4>Vậy với Java thì sao?</h4>
<p>Theo một cách hiểu nhất định và là cách hiểu mà đa phần đồng ý, thì Java không
có <strong>Pass-by-reference</strong> <strong>!</strong></p>
<p>Đâu đó các bạn sẽ đọc được những bài như
<a href="https://viettuts.vn/java/truyen-gia-tri-va-tham-chieu-pass-value-va-pass-reference-trong-java">https://viettuts.vn/java/truyen-gia-tri-va-tham-chieu-pass-value-va-pass-reference-trong-java</a>
, họ cho rằng khi bạn truyền giá trị kiểu Primitive vào function thì nó sẽ là
Pass-by-value và khi truyền giá trị kiểu Reference thì nó sẽ là
Pass-by-reference.</p>
<p>Để hiểu hơn sự khác nhau giữa Primitive Type và Reference Type, các bạn có thể
đọc ở link sau
<a href="https://javarevisited.blogspot.com/2015/09/difference-between-primitive-and-reference-variable-java.html">https://javarevisited.blogspot.com/2015/09/difference-between-primitive-and-reference-variable-java.html</a></p>
<p>Vế thứ nhất, khi bạn truyền giá trị kiểu Primitive vào function thì nó sẽ là
Pass-by-value thì không có gì bàn cãi, Java không có pointer như C/C++, cũng
chẳng có <strong>ref </strong>như C#, vậy nên bạn không thể <strong>Pass-by-reference</strong> với
Primitive type.</p>
<p>Nhưng vế thứ hai, khi truyền giá trị kiểu Reference thì nó sẽ là
<strong>Pass-by-reference</strong> có đúng hay không, nó còn tùy thuộc cách hiểu của các bạn
về từ <strong>Reference </strong>trong <strong>Reference </strong>type với từ Reference trong
Pass-by-<strong>reference</strong>, nếu bạn cho rằng 2 từ là một, OK, you WIN, thì đúng là
bạn đang pass “Reference” mà.</p>
<p>Nhưng nếu so sánh với C/C++ hay C# ở trên, nó thực sự có khác biệt.</p>
<h4>Chuyện gì xảy ra khi bạn pass một Reference Type vào một function?</h4>
<p>Trước tiên, bạn cần hiểu reference(không phải Reference Type) trong Java.</p>
<p>Ví dụ ta khai báo biến <strong>f</strong>, có type là Foo như sau</p>
<p><img src="../../../static/img/uploads/1_KpbpKPXBYZLHSPHXS_qcFQ.png" alt=""></p>
<p>Đoạn trên có thể giải thích như sau:</p>
<p><img src="../../../static/img/uploads/1_FGK0ujspvCiX4kDs8F9flQ.png" alt=""></p>
<p>Biến <strong>f </strong>mà chúng ta luôn nghĩ là đối tượng thực trong bộ nhớ thực ra không
phải, nó chỉ là tham chiếu đến đối tượng ở bên trong ô nhớ.</p>
<p>Và trên thực tế là khi bạn pass một Reference Type vào một function, ta ví dụ là
ta truyền <strong>f</strong> vào thì chương trình sẽ tạo ra một reference khác (tạm gọi là
<strong>a</strong>)và link nó đến cùng đối tượng mà <strong>f </strong>trỏ vào, hay nói cách khác, nó copy
reference <strong>f</strong></p>
<p>Ví dụ ta có hàm</p>
<p><img src="../../../static/img/uploads/1_pfblaAFQQzQ-xdZ0BVlzuA.png" alt=""></p>
<p>thì có thể được hiểu là</p>
<p><img src="../../../static/img/uploads/1_yk_S4f2BzZhjEZ5yyQgMHw.png" alt=""></p>
<p>lúc này sẽ có 2 reference <strong>a</strong> và <strong>f </strong>cùng trỏ đến một object, khi ta thay
đổi bất kỳ reference nào thì object cũng được thay đổi theo</p>
<p><img src="../../../static/img/uploads/0_Gxe_biEDnue3p8V0.png" alt=""></p>
<p>và khi function <strong>modifyReference </strong>chạy xong</p>
<p><img src="../../../static/img/uploads/1_GiGaLyDTz3_MnwByNfkKpw.png" alt=""></p>
<p>reference <strong>a</strong>(clone từ <strong>f</strong>) tạm coi là biến mất do đã ra ngoài function, lúc
này chỉ còn <strong>f</strong> và đối tượng Foo đã được thay đổi</p>
<p><img src="../../../static/img/uploads/1_3GZz2MqGquGf4Lp1zPKJxA.png" alt=""></p>
<p>Nghe có vẻ giống <strong>Pass-by-reference</strong>, nhưng sự thật là không. Phương pháp này
của Java không phải <strong>Pass-by-reference</strong>, nó nên được hiểu là <strong>Pass-by-value</strong>
reference, chương trình không thực sự pass chính xác reference <strong>f </strong>vào
function<strong> modifyReference</strong>, mà chương trình chỉ pass cái clone của
nó(reference <strong>a</strong>) vào mà thôi. Giờ thì nghe giống <strong>Pass-by-value</strong> chưa!</p>
<p>Để dễ hình dung, ta có ví dụ sau:</p>
<p><img src="../../../static/img/uploads/1_WQfe7G4OpO19AgMofjf2XA.png" alt=""></p>
<p>Trước tiên, khi pass <strong>f</strong> vào <strong>changeReference, </strong>ta vẫn được kết quả như trên
đã mô tả, chương trình sẽ clone reference <strong>f</strong> ra một reference khác và tất
nhiên là cùng trỏ đến đối tượng Foo của <strong>f</strong></p>
<p><img src="../../../static/img/uploads/0_T1iY94_4EdMtzSLb.png" alt=""></p>
<p>và tiếp phần hay là ta gán <strong>a</strong> sang một đối tượng Foo <strong>khác, </strong>theo như
<strong>Pass-by-reference</strong> của C/C++/C# mà ta đã bàn ở trên thì việc này sẽ khiến đối
tượng gốc cũng bị thay đổi, cùng xem lại với C#</p>
<p><img src="../../../static/img/uploads/1__s873yVnTlttWGEQ1xNDaQ.png" alt=""></p>
<p>Nhưng, Java không làm việc như vậy, khi bạn sẩy chân gán lại reference <strong>a</strong>
sang một đối tượng Foo khác, bạn sẽ không thể nào quay đầu được.</p>
<p><img src="../../../static/img/uploads/1_mokO7hm-OBN6LBg7i8b_IA.png" alt=""></p>
<p>khi thay đổi <strong>a</strong>, đổi attribute từ “b” sang “c”</p>
<p><img src="../../../static/img/uploads/1_G3StemGqY2y41sCwMU7f8w.png" alt=""></p>
<p>Vấn đề trên tưởng như đơn giản nhưng rất nhiều người không biết và vẫn “ngã
ngựa”</p>
<p><img src="../../../static/img/uploads/1_18FR4EFkumI_DQKuK8LxCA.png" alt=""></p>
<p>Đó cũng là lý do vì sao các linter trong các ngôn ngữ như Java, Python,
Javascript,… đều warning mỗi khi bạn gán lại argument của function và việc thay
đổi attribute của đối tượng bên trong function cũng là cực kỳ nên tránh</p>
<p>Nên tránh</p>
<p><img src="../../../static/img/uploads/1_zdheUcSsqR8ASerhdp6B5A.png" alt=""></p>
<p>Thay vào đó nên tạo ra một list mới và tránh thay đổi list cũ</p>
<p><img src="../../../static/img/uploads/1_7Lrhfw4Hlz5cEZLmC6JW6g.png" alt=""></p>
<h3>Kết luận</h3>
<p>Có thể bạn nghĩ rằng khi đổi attribute của reference thì đối tượng thực tế cũng
đổi, nó chính là <strong>Pass-by-reference</strong>, vậy Java có nó. Thật ra điều đó không
quan trọng. Java có <strong>Pass-by-reference</strong> hay không? Câu này đối với dev, nó
cũng vô nghĩa như câu Java có phải ngôn ngữ thuần hướng đối tượng(purely
Object-Oriented Language) hay không! Vì khái niệm vẫn chỉ là khái niệm, học
thuộc khái niệm không giúp bạn code tốt hơn, hãy hiểu bản chất, hiểu cú pháp hơn
là tranh cãi mấy điều vô bổ.</p>
<h3>Reference</h3>
<p><a href="https://www.mathwarehouse.com/programming/passing-by-value-vs-by-reference-visual-explanation.php">https://www.mathwarehouse.com/programming/passing-by-value-vs-by-reference-visual-explanation.php</a>
<a href="https://www.javaworld.com/article/2077424/learn-java-does-java-pass-by-reference-or-pass-by-value.html">https://www.javaworld.com/article/2077424/learn-java-does-java-pass-by-reference-or-pass-by-value.html</a></p>

          </div>
        </div><!-- .post-inner -->
      </article><!-- .post-content -->
      
  
  <nav class="post-pagination section-box">
    

    
    
      
    

    
    

    

    
    
        <div class="post-next">
          <h3 class="post-title"><a href="../../../vi/blog/spring-data-jpahibernate-nhng-sai-lm-ng-ngn-khong-phi-ai-cng-bit/">Spring data JPA/Hibernate: Những sai lầm rất dễ gặp phải</a></h3>

          <div class="post-info">
            <a href="javascript: void(0)"><i class="rsicon rsicon-user"></i>by luanvv</a>
            <a href="javascript: void(0)"><i class="rsicon"></i>Nov 11 2018</a>
          </div>
        </div>
    
  </nav><!-- .post-pagination -->

    </main>
    <!-- .post-single -->
  </div>
</div>

      </div>
    </div><!-- .content -->
    <footer class="footer">
      <div class="footer-social">
        <ul class="social">
          <li>
              <a class="ripple-centered" aria-label="Github" rel="noopener" target="_blank" href="https://github.com/luanvuhlu">
                  <i class="rsicon rsicon-github"></i>
              </a>
          </li>
          <li>
              <a class="ripple-centered" aria-label="Facebook" rel="noopener" target="_blank" href="https://www.facebook.com/luanvuhlu" target="_blank">
                  <i class="rsicon rsicon-facebook"></i>
              </a>
          </li>
          <li>
              <a class="ripple-centered" aria-label="LinkedIn" rel="noopener" target="_blank" href="https://www.linkedin.com/in/luanvv/" target="_blank">
                  <i class="rsicon rsicon-linkedin"></i>
              </a>
          </li>
          <li>
              <a class="ripple-centered" aria-label="Skype" rel="noopener" target="_blank" href="skype:luanvuhlu"><i
                  class="rsicon rsicon-skype"></i>
              </a>
          </li>
          <li>
              <a class="ripple-centered" aria-label="Email" rel="noopener" target="_blank" href="mailto:luanvuhlu@gmail.com">
                  <i class="rsicon rsicon-email"></i>
              </a>
          </li>
      </div>
    </footer><!-- .footer -->
  </div><!-- .wrapper -->

  <a class="btn-scroll-top" href="#"><i class="rsicon rsicon-arrow-up"></i></a>
  <div id="overlay"></div>
  <div id="preloader">
    <div class="preload-icon"><span></span><span></span></div>
    <div class="preload-text">Loading ...</div>
  </div>
  <!-- Scripts -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!--   <script type="text/javascript" src="../../../static/fonts/map-icons/js/map-icons.min.js"></script> -->
  <script type="text/javascript" src="../../../static/js/plugins/jquery.mousewheel-3.0.6.pack.js"></script>
  <script type="text/javascript" src="../../../static/js/plugins/imagesloaded.pkgd.min.js"></script>
  <script type="text/javascript" src="../../../static/js/plugins/isotope.pkgd.min.js"></script>
  <script type="text/javascript" src="../../../static/js/plugins/jquery.appear.min.js"></script>
  <script type="text/javascript" src="../../../static/js/plugins/jquery.onepagenav.min.js"></script>
  <script type="text/javascript" src="../../../static/js/plugins/jquery.bxslider/jquery.bxslider.min.js"></script>
 <!--  <script type="text/javascript" src="../../../static/js/plugins/jquery.customscroll/jquery.mCustomScrollbar.concat.min.js"></script> -->
  <!-- <script type="text/javascript" src="../../../static/js/plugins/jquery.mediaelement/mediaelement-and-player.min.js"></script> -->
  <!-- <script type="text/javascript" src="../../../static/js/plugins/jquery.fancybox/jquery.fancybox.pack.js"></script> -->
 <!--  <script type="text/javascript" src="../../../static/js/plugins/jquery.fancybox/helpers/jquery.fancybox-media.js"></script> -->
  <script type="text/javascript" src="../../../static/js/plugins/jquery.owlcarousel/owl.carousel.min.js"></script>
  <script type="text/javascript" src="../../../static/js/options.js"></script>
  <script type="text/javascript" src="../../../static/js/site.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128976168-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-128976168-1');
    const observer = lozad(); // lazy loads elements with default selector as '.lozad'
    observer.observe();
    (function ($) {
        "use strict";
        $('.post-editor>p>img').parent().addClass('img-block');
    })(jQuery);
  </script>
<!-- <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>-->
<!-- Firebase config here -->
<script type="text/javascript" src="../../../static/js/service-worker.js"></script>


</body>
</html>
